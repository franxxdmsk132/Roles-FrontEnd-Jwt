<app-menu></app-menu>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>

<div class="container">
  <nav class="navbar bg-body-tertiary rounded" data-bs-theme="dark">
    <div class="container-fluid">
      <a class="navbar-brand">Buscar</a>
      <form class="d-flex" role="search">
        <input class="form-control me-2" type="text" placeholder="Nombre" aria-label="Nombre" [(ngModel)]="searchNombre">
        <input class="form-control me-2" type="text" placeholder="Categoria" aria-label="Categoria" [(ngModel)]="searchCategoria">
        <input class="form-control me-2" type="number" placeholder="Talla" aria-label="Talla" [(ngModel)]="searchTalla">
        <button class="btn btn-outline-success" type="button" (click)="buscar()">Buscar</button>
        <button class="btn btn-outline-secondary" type="button" (click)="limpiarFiltros()">Limpiar</button>
      </form>
    </div>
  </nav>

  <table class="table table-dark mt-3 rounded" *ngIf="productosFiltrados.length > 0">
    <thead>
    <tr>
      <th scope="col">Id</th>
      <th scope="col">Nombre</th>
      <th scope="col">Categoria</th>
      <th scope="col">Descripcion</th>
      <th scope="col">Talla</th>
      <th scope="col">Estado</th>
      <th scope="col">Precio</th>
      <th scope="col">Ver</th>
      <th scope="col" *ngIf="isAdmin || isEmpl">Editar</th>
      <th scope="col" *ngIf="isAdmin">Borrar</th>
    </tr>
    </thead>
    <tbody>
    <tr *ngFor="let producto of productosFiltrados">
      <td>{{producto.id}}</td>
      <td>{{producto.nombre}}</td>
      <td>{{producto.categoria}}</td>
      <td>{{producto.descripcion}}</td>
      <td>{{producto.talla}}</td>
      <td [ngClass]="{'text-success font-italic': producto.estado, 'text-danger font-italic': !producto.estado}">
        {{ producto.estado ? 'Disposición' : 'Reposición' }}
      </td>
      <td>{{producto.precio}}$</td>
      <td><button class="btn btn-outline-primary" routerLink="/detalle/{{producto.id}}"><i class="far fa-eye"></i> Ver</button></td>
      <td *ngIf="isAdmin || isEmpl"><button class="btn btn-outline-warning" routerLink="/editar/{{producto.id}}"><i class="far fa-edit"></i> Editar</button></td>
      <td *ngIf="isAdmin"><button class="btn btn-outline-danger" (click)="borrar(producto.id)"><i class="far fa-trash-alt"></i> Eliminar</button></td>
    </tr>
    </tbody>
  </table>

  <p *ngIf="productosFiltrados.length === 0 && productos.length > 0" class="text-center mt-3">No se encontraron productos con esas características.</p>


  <div class="mt-3" *ngIf="isAdmin || isEmpl">
    <button class="btn btn-outline-success btn-lg" routerLink="/nuevo">
      <i class="fas fa-plus-circle"></i> Nuevo Producto
    </button>
  </div>
</div>
